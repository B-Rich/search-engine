<!DOCTYPE html>
<html>

<head>
<title>Search Demo</title>
<meta charset="utf-8"/>
<link rel="stylesheet" href="vendor/katex/katex.min.css" type="text/css"/>
<link rel="stylesheet" href="vendor/mathquill/mathquill.css" type="text/css"/>
<link rel="stylesheet" href="search.css" type="text/css"/>
<link rel="stylesheet" href="qry-box.css" type="text/css"/>
<link rel="stylesheet" href="font.css" type="text/css"/>

<script type="text/javascript" src="vendor/jquery/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="vendor/mathquill/mathquill.min.js"></script>
<script type="text/javascript" src="vendor/vue/vue.min.js"></script>
<script type="text/javascript" src="vendor/katex/katex.min.js"></script>
<script type="text/javascript" src="tex-render.js"></script>
<script type="text/javascript" src="search.js"></script>
<script type="text/javascript" src="qry-box.js"></script>
<style>
img.social {
	height: 16px;
}
/*
	<span class="collapse">(+) Debug</span>
	<div>
		<ul>
		<li v-for="i in items">
			{{i.type}}: "{{i.str}}" <br/>
		</li>
		</ul>
		<hr class="vsep"/>
	</div>
*/
</style>
</head>

<body style="margin: 0;">

<!-- Query Box -->
<div id="qry-input-vue-app" style="padding: 8px 8px 10px 8px; box-shadow: 0 0 4px rgba(0,0,0,0.25);">

<!-- Query input area -->
<div id="qry-input-area" v-on:click="area_on_click">
<ul class="qry-li-wrap"><template v-for="i in items">
		<li v-if="i.type == 'term'" class="qry-li">
			<div class="qry-div-fix">
				<span>{{{i.str}}}</span>
				<span title="delete" class="dele" v-bind:onclick="'dele_kw('+$index+')'">×</span>
			</div>
		</li>
		<li v-if="i.type == 'tex'" class="qry-li">
			<div class="qry-div-fix">
				<span>[imath]{{i.str}}[/imath]</span>
				<span title="delete" class="dele" v-bind:onclick="'dele_kw('+$index+')'">×</span>
				<span title="edit" class="edit" v-bind:onclick="'edit_kw('+$index+')'">✐</span>
			</div>
		</li>
		<li v-if="i.type == 'term-input'" class="qry-li">
			<input v-on:keyup="on_input" v-model="i.str" type="text" id="qry-input-box" class="pl_holder" placeholder="Enter here, type $ for TeX input."/>
		</li>
		<li v-if="i.type == 'tex-input'" class="qry-li">
			<span id="math-input"></span>
			<span class="pl_holder">Press enter after TeX edit</span>
		</li>
</template></ul>
</div>
<!-- Query input area END -->

<!-- Search button and options -->
<div style="margin-top: 8px;">
	<button style="float:right; margin-right: 5px;" type="button" id="search_button">Search</button>

	<span class="collapse" title="About">(+) ?</span>
	<div>
		<h3>About</h3>
		<p>This is a demo page for a math-aware search engine. <i>Math-aware</i> means
		you can add math expression(s) as some of your keywords to have search engine
		help you find similar expressions and return those documents that you may find
		relevant to your input. In short, a typical search engine plus math search.</p>
		<h3>Any thought?</h3>
		<p>Send it to: zhongwei AT udel.edu</p>

		<hr class="vsep"/>
	</div>

	<span class="collapse" title="Raw query and API">(+) Raw</span>
	<div>
		<p>If you know TeX, it is faster to edit the equivalent raw query
		(separate keywords by comma):</p>
		<input id="qry" style="width: 100%;" type="text" v-model="raw_str" v-on:keyup="on_rawinput" placeholder="empty"/>
		<p>Its corresponding WEB API:</p>
		<p style="background-color: black; color: #bbb; padding: 3px 0 3px 6px; overflow-x: auto; white-space: nowrap;">
		curl -v {{url_root}}search-relay.php?q={{enc_uri}}
		<p>
	</div>

</div>
<!-- Search button and options END -->

</div>
<!-- Query Box END -->

<!-- Search Results -->
<div id="search-vue-app">
	<p v-if="ret_code != 0">Return code: {{ret_code}}, message: {{ret_str}}.</p>
	<ol>
	<li v-for="hit in hits">
		<a target="_blank" v-bind:href="hit.url">{{hit.url}}</a><br/>
		<p class="snippet">{{{ hit.snippet }}}</p>
	</li>
	</ol>

<!-- Footer -->
<div v-show="tot_pages != 0" style="padding-top: 20px; height: 30px; box-shadow: 0 0 4px rgba(0,0,0,0.25);">

<!-- Left Footer -->
	<div style="float: left; padding-left: 20px;">
		<span v-if="prev != ''">
			← <a class="page-navi" v-bind:onclick="prev" href="#">prev</a>
		</span>
		<span>[page {{cur_page}}/{{tot_pages}}]</span>
		<span v-if="next != ''">
			<a class="page-navi" v-bind:onclick="next" href="#">next</a> →
		</span>
	</div>

<!-- Right Footer -->
	<div style="float: right;">
		<a href="https://twitter.com/intent/tweet?text=" target="_blank" title="Tweet">
		<img class="social" src="images/social/Twitter.svg"></a>
		<a href="https://plus.google.com/share?url=" target="_blank" title="Share on Google+">
		<img class="social" src="images/social/Google+.svg"></a>
		<a href="http://www.reddit.com/submit?url=&title=" target="_blank" title="Submit to Reddit">
		<img class="social" src="images/social/Reddit.svg"></a>
		<script async defer src="https://buttons.github.io/buttons.js"></script>
		<a class="github-button" href="https://github.com/t-k-/the-day-after-tomorrow" data-count-href="/ntkme/github-buttons/stargazers" data-count-api="/repos/ntkme/github-buttons#stargazers_count" data-count-aria-label="# stargazers on GitHub" aria-label="Star ntkme/github-buttons on GitHub">Star</a>
		<!-- Place this tag in your head or just before your close body tag. -->
	</div>

</div>
<!-- Footer END -->

</div>
<!-- Search Results END -->

</body>
</html>
